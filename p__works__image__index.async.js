"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{1913:function(X,D,e){var M=e(15009),r=e.n(M),A=e(99289),j=e.n(A),y=e(5574),c=e.n(y),i=e(20385),x=e(64082),p=e(16596),u=e(35312),P=e(78367),B=e(68872),E=e(17788),g=e(14726),h=e(96074),n=e(55102),l=e(67294),m=e(85893),I=P.Z.Dragger,C=function(L){var F=(0,l.useState)(""),b=c()(F,2),Z=b[0],t=b[1];function o(d){var _;try{_=new URL(d)}catch(K){return!1}return _.protocol==="https:"}var a=function(){var d=j()(r()().mark(function _(K){var T;return r()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(o(K)){f.next=3;break}return B.ZP.error("Sorry, URL failed to upload."),f.abrupt("return");case 3:return f.next=5,(0,i.tg)(K);case 5:T=f.sent,T.succeeded&&B.ZP.success("Uploaded!");case 7:case"end":return f.stop()}},_)}));return function(K){return d.apply(this,arguments)}}(),s=function(){var d=j()(r()().mark(function _(){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(o(Z)){T.next=3;break}return B.ZP.error("Sorry, URL failed to upload."),T.abrupt("return");case 3:L.onFinish(Z),L.onCancel();case 5:case"end":return T.stop()}},_)}));return function(){return d.apply(this,arguments)}}();return(0,m.jsxs)(E.Z,{open:L.open,onCancel:function(){return L.onCancel()},centered:!0,title:"Upload",onOk:s,children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsxs)(I,{children:[(0,m.jsx)("p",{className:"ant-upload-drag-icon",children:(0,m.jsx)(x.Z,{})}),(0,m.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,m.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,m.jsx)("div",{className:"text-center",children:(0,m.jsx)(g.ZP,{icon:(0,m.jsx)(p.Z,{}),type:"link",size:"large",children:(0,m.jsx)("b",{children:"Choose from your computer"})})}),(0,m.jsx)(h.Z,{children:(0,m.jsx)(u.FormattedMessage,{id:"general.or"})}),(0,m.jsx)(n.Z,{placeholder:"Paste image or URL",onChange:function(_){return t(_.currentTarget.value)}})]})};D.Z=C},19489:function(X,D,e){var M=e(5251),r=e(69753),A=e(93410),j=e(35312),y=e(55060),c=e(32983),i=e(14726),x=e(96074),p=e(26412),u=e(85893),P=function(E){var g,h=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],n=(0,j.useIntl)(),l=E.file,m=function(){E.onChange&&E.onChange()},I=function(){var R;return h.includes((R=l==null?void 0:l.type)!==null&&R!==void 0?R:"")?(0,u.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,u.jsx)(y.Z,{src:(0,M.Er)(l==null?void 0:l.url)})}):(0,u.jsx)("div",{onClick:m,children:(0,u.jsx)(c.Z,{})})};return(0,u.jsxs)(A.Z,{title:n.formatMessage({id:"general.preview"}),actions:[(0,u.jsx)(i.ZP,{type:"link",onClick:function(){return window.location.href=(0,M.Er)(l==null?void 0:l.url)},icon:(0,u.jsx)(r.Z,{}),children:"Download"},"download")],children:[I(),(0,u.jsx)(x.Z,{}),(0,u.jsxs)(p.Z,{title:"File info",column:1,children:[(0,u.jsx)(p.Z.Item,{label:"Name",children:l==null?void 0:l.name}),(0,u.jsxs)(p.Z.Item,{label:"Size",children:[(((g=l==null?void 0:l.size)!==null&&g!==void 0?g:0)/1024).toFixed(2)," KB"]}),(0,u.jsx)(p.Z.Item,{label:"Type",children:l==null?void 0:l.type})]})]})};D.Z=P},16411:function(X,D,e){e.r(D),e.d(D,{default:function(){return K}});var M=e(15009),r=e.n(M),A=e(99289),j=e.n(A),y=e(5574),c=e.n(y),i=e(1913),x=e(97857),p=e.n(x),u=e(34994),P=e(5966),B=e(64317),E=e(68872),g=e(14726),h=e(67294),n=e(85893),l=function(S){var f=u.A.useFormInstance(),z=(0,h.useRef)(),ne=(0,h.useState)(!0),N=c()(ne,2),k=N[0],G=N[1],re=(0,h.useState)(),H=c()(re,2),Y=H[0],V=H[1];(0,h.useEffect)(function(){var U=f==null?void 0:f.getFieldValue("link");if(U){var W;(W=z.current)===null||W===void 0||W.setFields([{name:"name",value:U.name},{name:"href",value:U.href},{name:"target",value:U.target}])}},[]);var q=function(){var U=j()(r()().mark(function W(J){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(S.name){v.next=2;break}return v.abrupt("return",E.ZP.warning("Name missing"));case 2:V(J),f==null||f.setFields([{name:S.name,value:J}]),G(!0);case 5:case"end":return v.stop()}},W)}));return function(J){return U.apply(this,arguments)}}();return(0,n.jsxs)(u.A.Item,p()(p()({},S),{},{children:[(0,n.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,n.jsx)("div",{style:{height:32,border:"1px dashed #d1d1d1",flex:1,padding:"4px 11px",borderRadius:4},children:Y==null?void 0:Y.name}),(0,n.jsx)(g.ZP,{type:"primary",onClick:function(){return G(!k)},children:"Add link"},"primary")]}),(0,n.jsx)("div",{style:{backgroundColor:"#eee",padding:16,borderRadius:4,marginTop:16},hidden:k,children:(0,n.jsxs)(u.A,{onFinish:q,formRef:z,children:[(0,n.jsx)(P.Z,{name:"name",label:"Name"}),(0,n.jsx)(P.Z,{name:"href",label:"URL",rules:[{required:!0}]}),(0,n.jsx)(B.Z,{name:"target",label:"Target",allowClear:!0,options:[{value:"_blank",label:"Open in new tab"}]})]})})]}))},m=l,I=e(19489),C=e(66352),R=e(82061),L=e(82826),F=e(14361),b=e(63386),Z=e(93410),t=e(35312),o=e(78957),a=e(86738),s=e(71230),d=e(15746),_=function(){var S=(0,t.useParams)(),f=S.id,z=(0,t.useIntl)(),ne=(0,h.useState)(),N=c()(ne,2),k=N[0],G=N[1],re=(0,h.useState)(!1),H=c()(re,2),Y=H[0],V=H[1],q=(0,h.useRef)(),U=function(){var v=j()(r()().mark(function O(w){var ee;return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,C.iH)(f,w);case 2:ee=Q.sent,ee.succeeded?E.ZP.success("Saved!"):E.ZP.error(ee.errors[0].description);case 4:case"end":return Q.stop()}},O)}));return function(w){return v.apply(this,arguments)}}();(0,h.useEffect)(function(){(0,C.Tu)(f).then(function(v){var O;G(v.file),(O=q.current)===null||O===void 0||O.setFields([{name:"alt",value:v.alt},{name:"src",value:v.src},{name:"link",value:v.link}])})},[]);var W=function(){var v=j()(r()().mark(function O(){var w;return r()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,C.Js)(f);case 2:w=$.sent,w.succeeded?(E.ZP.success(z.formatMessage({id:"general.deleted"})),t.history.back()):E.ZP.error(w.errors[0].description);case 4:case"end":return $.stop()}},O)}));return function(){return v.apply(this,arguments)}}(),J=(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(a.Z,{title:"Are you sure?",onConfirm:W,children:(0,n.jsx)(g.ZP,{type:"primary",danger:!0,icon:(0,n.jsx)(R.Z,{}),children:"Delete"})}),(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(L.Z,{}),onClick:function(){return t.history.back()},children:"Back"}),(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(F.Z,{})})]}),te=function(O){G(O),V(!1)};return(0,n.jsxs)(b._z,{title:"Image",extra:J,children:[(0,n.jsxs)(s.Z,{gutter:16,children:[(0,n.jsx)(d.Z,{span:6,children:(0,n.jsx)(I.Z,{file:k,onChange:function(){return V(!0)}})}),(0,n.jsx)(d.Z,{span:18,children:(0,n.jsx)(Z.Z,{title:z.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(u.A,{onFinish:U,formRef:q,children:[(0,n.jsx)(P.Z,{name:"src",label:"Src"}),(0,n.jsx)(m,{name:"link",label:"Link"}),(0,n.jsx)(P.Z,{name:"alt",label:"Alt"})]})})})]}),(0,n.jsx)(i.Z,{open:Y,onCancel:V,onFinish:te})]})},K=_},20385:function(X,D,e){e.d(D,{Ah:function(){return u},Cq:function(){return g},V6:function(){return x},kE:function(){return m},p6:function(){return b},tg:function(){return C},yk:function(){return L},z3:function(){return n}});var M=e(15009),r=e.n(M),A=e(97857),j=e.n(A),y=e(99289),c=e.n(y),i=e(35312);function x(t,o,a){return p.apply(this,arguments)}function p(){return p=c()(r()().mark(function t(o,a,s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("file/list",j()({method:"GET",params:j()({type:Object.keys(a!=null?a:[]).length>0?a==null?void 0:a.join(","):""},o)},s||{})));case 1:case"end":return _.stop()}},t)})),p.apply(this,arguments)}function u(t){return P.apply(this,arguments)}function P(){return P=c()(r()().mark(function t(o){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.request)("file/delete-file-content/".concat(o),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),P.apply(this,arguments)}function B(t){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function t(o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("file/delete-file-item",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),E.apply(this,arguments)}function g(t){return h.apply(this,arguments)}function h(){return h=c()(r()().mark(function t(o){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.request)("file/".concat(o)));case 1:case"end":return s.stop()}},t)})),h.apply(this,arguments)}function n(t,o){return l.apply(this,arguments)}function l(){return l=c()(r()().mark(function t(o,a){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,i.request)("file/file-items/".concat(a.id)));case 1:case"end":return d.stop()}},t)})),l.apply(this,arguments)}function m(t){return I.apply(this,arguments)}function I(){return I=c()(r()().mark(function t(o){var a;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=new FormData,a.append("file",o),d.abrupt("return",(0,i.request)("file/upload",{method:"POST",data:a}));case 3:case"end":return d.stop()}},t)})),I.apply(this,arguments)}function C(t){return R.apply(this,arguments)}function R(){return R=c()(r()().mark(function t(o){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,i.request)("file/upload-from-url",{method:"POST",data:{url:o}}));case 1:case"end":return s.stop()}},t)})),R.apply(this,arguments)}function L(){return F.apply(this,arguments)}function F(){return F=c()(r()().mark(function t(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("file/count"));case 1:case"end":return a.stop()}},t)})),F.apply(this,arguments)}function b(){return Z.apply(this,arguments)}function Z(){return Z=c()(r()().mark(function t(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("file/total-size"));case 1:case"end":return a.stop()}},t)})),Z.apply(this,arguments)}},5251:function(X,D,e){e.d(D,{Er:function(){return j},p6:function(){return y}});var M=e(27484),r=e.n(M);function A(i){return i.trim()}function j(i){return new URL(i||"",localStorage.getItem("wf_URL")||"").href}function y(i){return i?r()(i).format("DD/MM/YYYY hh:mm:ss"):"-"}var c=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(p){setTimeout(function(){p(!0)},x)})}}}]);
