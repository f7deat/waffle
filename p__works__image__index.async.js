"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{1913:function(k,D,e){var C=e(15009),t=e.n(C),A=e(99289),E=e.n(A),R=e(5574),c=e.n(R),u=e(20385),T=e(64082),f=e(16596),o=e(78367),h=e(68872),S=e(17788),v=e(14726),g=e(96074),m=e(55102),r=e(67294),n=e(85893),W=o.Z.Dragger,y=function(p){var w=(0,r.useState)(""),L=c()(w,2),F=L[0],B=L[1];function s(a){var i;try{i=new URL(a)}catch(j){return!1}return i.protocol==="https:"}var d=function(){var a=E()(t()().mark(function i(j){var M;return t()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(s(j)){P.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),P.abrupt("return");case 3:return P.next=5,(0,u.tg)(j);case 5:M=P.sent,M.succeeded&&h.ZP.success("Uploaded!");case 7:case"end":return P.stop()}},i)}));return function(j){return a.apply(this,arguments)}}(),l=function(){var a=E()(t()().mark(function i(){return t()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(s(F)){M.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),M.abrupt("return");case 3:p.onFinish(F),p.onCancel();case 5:case"end":return M.stop()}},i)}));return function(){return a.apply(this,arguments)}}();return(0,n.jsxs)(S.Z,{open:p.open,onCancel:function(){return p.onCancel()},centered:!0,title:"Upload",onOk:l,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(W,{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(T.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(f.Z,{}),type:"link",size:"large",children:(0,n.jsx)("b",{children:"Choose from your computer"})})}),(0,n.jsx)(g.Z,{children:"or"}),(0,n.jsx)(m.Z,{placeholder:"Paste image or URL",onChange:function(i){return B(i.currentTarget.value)}})]})};D.Z=y},19489:function(k,D,e){var C=e(5251),t=e(69753),A=e(93410),E=e(35312),R=e(55060),c=e(32983),u=e(14726),T=e(96074),f=e(26412),o=e(85893),h=function(v){var g,m=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],r=(0,E.useIntl)(),n=v.file,W=function(){v.onChange&&v.onChange()},y=function(){var p;return m.includes((p=n==null?void 0:n.type)!==null&&p!==void 0?p:"")?(0,o.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,o.jsx)(R.Z,{src:(0,C.Er)(n==null?void 0:n.url)})}):(0,o.jsx)("div",{onClick:W,children:(0,o.jsx)(c.Z,{})})};return(0,o.jsxs)(A.Z,{title:r.formatMessage({id:"general.preview"}),actions:[(0,o.jsx)(u.ZP,{type:"link",onClick:function(){return window.location.href=(0,C.Er)(n==null?void 0:n.url)},icon:(0,o.jsx)(t.Z,{}),children:"Download"},"download")],children:[y(),(0,o.jsx)(T.Z,{}),(0,o.jsxs)(f.Z,{title:"File info",column:1,children:[(0,o.jsx)(f.Z.Item,{label:"Name",children:n==null?void 0:n.name}),(0,o.jsxs)(f.Z.Item,{label:"Size",children:[(((g=n==null?void 0:n.size)!==null&&g!==void 0?g:0)/1024).toFixed(2)," KB"]}),(0,o.jsx)(f.Z.Item,{label:"Type",children:n==null?void 0:n.type})]})]})};D.Z=h},16411:function(k,D,e){e.r(D),e.d(D,{default:function(){return M}});var C=e(15009),t=e.n(C),A=e(99289),E=e.n(A),R=e(5574),c=e.n(R),u=e(1913),T=e(97857),f=e.n(T),o=e(34994),h=e(5966),S=e(64317),v=e(68872),g=e(14726),m=e(67294),r=e(85893),n=function(P){var U=o.A.useFormInstance(),$=(0,m.useRef)(),ee=(0,m.useState)(!0),z=c()(ee,2),Q=z[0],N=z[1],ne=(0,m.useState)(),G=c()(ne,2),H=G[0],Y=G[1];(0,m.useEffect)(function(){var I=U==null?void 0:U.getFieldValue("link");if(I){var Z;(Z=$.current)===null||Z===void 0||Z.setFields([{name:"name",value:I.name},{name:"href",value:I.href},{name:"target",value:I.target}])}},[]);var X=function(){var I=E()(t()().mark(function Z(V){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(P.name){_.next=2;break}return _.abrupt("return",v.ZP.warning("Name missing"));case 2:Y(V),U==null||U.setFields([{name:P.name,value:V}]),N(!0);case 5:case"end":return _.stop()}},Z)}));return function(V){return I.apply(this,arguments)}}();return(0,r.jsxs)(o.A.Item,f()(f()({},P),{},{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,r.jsx)("div",{style:{height:32,border:"1px dashed #d1d1d1",flex:1,padding:"4px 11px",borderRadius:4},children:H==null?void 0:H.name}),(0,r.jsx)(g.ZP,{type:"primary",onClick:function(){return N(!Q)},children:"Add link"},"primary")]}),(0,r.jsx)("div",{style:{backgroundColor:"#eee",padding:16,borderRadius:4,marginTop:16},hidden:Q,children:(0,r.jsxs)(o.A,{onFinish:X,formRef:$,children:[(0,r.jsx)(h.Z,{name:"name",label:"Name"}),(0,r.jsx)(h.Z,{name:"href",label:"URL",rules:[{required:!0}]}),(0,r.jsx)(S.Z,{name:"target",label:"Target",allowClear:!0,options:[{value:"_blank",label:"Open in new tab"}]})]})})]}))},W=n,y=e(19489),x=e(66352),p=e(82061),w=e(82826),L=e(14361),F=e(63386),B=e(93410),s=e(35312),d=e(78957),l=e(86738),a=e(71230),i=e(15746),j=function(){var P=(0,s.useParams)(),U=P.id,$=(0,s.useIntl)(),ee=(0,m.useState)(),z=c()(ee,2),Q=z[0],N=z[1],ne=(0,m.useState)(!1),G=c()(ne,2),H=G[0],Y=G[1],X=(0,m.useRef)(),I=function(){var _=E()(t()().mark(function O(b){var q;return t()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,x.iH)(U,b);case 2:q=J.sent,q.succeeded?v.ZP.success("Saved!"):v.ZP.error(q.errors[0].description);case 4:case"end":return J.stop()}},O)}));return function(b){return _.apply(this,arguments)}}();(0,m.useEffect)(function(){(0,x.Tu)(U).then(function(_){var O;N(_.file),(O=X.current)===null||O===void 0||O.setFields([{name:"alt",value:_.alt},{name:"src",value:_.src},{name:"link",value:_.link}])})},[]);var Z=function(){var _=E()(t()().mark(function O(){var b;return t()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,x.Js)(U);case 2:b=K.sent,b.succeeded?(v.ZP.success($.formatMessage({id:"general.deleted"})),s.history.back()):v.ZP.error(b.errors[0].description);case 4:case"end":return K.stop()}},O)}));return function(){return _.apply(this,arguments)}}(),V=(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(l.Z,{title:"Are you sure?",onConfirm:Z,children:(0,r.jsx)(g.ZP,{type:"primary",danger:!0,icon:(0,r.jsx)(p.Z,{}),children:"Delete"})}),(0,r.jsx)(g.ZP,{icon:(0,r.jsx)(w.Z,{}),onClick:function(){return s.history.back()},children:"Back"}),(0,r.jsx)(g.ZP,{icon:(0,r.jsx)(L.Z,{})})]}),ae=function(O){N(O),Y(!1)};return(0,r.jsxs)(F._z,{title:"Image",extra:V,children:[(0,r.jsxs)(a.Z,{gutter:16,children:[(0,r.jsx)(i.Z,{span:6,children:(0,r.jsx)(y.Z,{file:Q,onChange:function(){return Y(!0)}})}),(0,r.jsx)(i.Z,{span:18,children:(0,r.jsx)(B.Z,{title:$.formatMessage({id:"menu.settings"}),children:(0,r.jsxs)(o.A,{onFinish:I,formRef:X,children:[(0,r.jsx)(h.Z,{name:"src",label:"Src"}),(0,r.jsx)(W,{name:"link",label:"Link"}),(0,r.jsx)(h.Z,{name:"alt",label:"Alt"})]})})})]}),(0,r.jsx)(u.Z,{open:H,onCancel:Y,onFinish:ae})]})},M=j},20385:function(k,D,e){e.d(D,{Ah:function(){return o},Cq:function(){return g},V6:function(){return T},kE:function(){return W},p6:function(){return F},tg:function(){return x},yk:function(){return w},z3:function(){return r}});var C=e(15009),t=e.n(C),A=e(97857),E=e.n(A),R=e(99289),c=e.n(R),u=e(35312);function T(s,d,l){return f.apply(this,arguments)}function f(){return f=c()(t()().mark(function s(d,l,a){return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,u.request)("file/list",E()({method:"GET",params:E()({type:Object.keys(l!=null?l:[]).length>0?l==null?void 0:l.join(","):""},d)},a||{})));case 1:case"end":return j.stop()}},s)})),f.apply(this,arguments)}function o(s){return h.apply(this,arguments)}function h(){return h=c()(t()().mark(function s(d){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("file/delete-file-content/".concat(d),{method:"POST"}));case 1:case"end":return a.stop()}},s)})),h.apply(this,arguments)}function S(s){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function s(d){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("file/delete-file-item",{method:"POST",data:d}));case 1:case"end":return a.stop()}},s)})),v.apply(this,arguments)}function g(s){return m.apply(this,arguments)}function m(){return m=c()(t()().mark(function s(d){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("file/".concat(d)));case 1:case"end":return a.stop()}},s)})),m.apply(this,arguments)}function r(s,d){return n.apply(this,arguments)}function n(){return n=c()(t()().mark(function s(d,l){return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("file/file-items/".concat(l.id)));case 1:case"end":return i.stop()}},s)})),n.apply(this,arguments)}function W(s){return y.apply(this,arguments)}function y(){return y=c()(t()().mark(function s(d){var l;return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return l=new FormData,l.append("file",d),i.abrupt("return",(0,u.request)("file/upload",{method:"POST",data:l}));case 3:case"end":return i.stop()}},s)})),y.apply(this,arguments)}function x(s){return p.apply(this,arguments)}function p(){return p=c()(t()().mark(function s(d){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("file/upload-from-url",{method:"POST",data:{url:d}}));case 1:case"end":return a.stop()}},s)})),p.apply(this,arguments)}function w(){return L.apply(this,arguments)}function L(){return L=c()(t()().mark(function s(){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("file/count"));case 1:case"end":return l.stop()}},s)})),L.apply(this,arguments)}function F(){return B.apply(this,arguments)}function B(){return B=c()(t()().mark(function s(){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("file/total-size"));case 1:case"end":return l.stop()}},s)})),B.apply(this,arguments)}},5251:function(k,D,e){e.d(D,{Er:function(){return E},p6:function(){return R}});var C=e(27484),t=e.n(C);function A(u){return u.trim()}function E(u){return new URL(u||"",localStorage.getItem("wf_URL")||"").href}function R(u){return u?t()(u).format("DD/MM/YYYY hh:mm:ss"):"-"}var c=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(f){setTimeout(function(){f(!0)},T)})}}}]);
