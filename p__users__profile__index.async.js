"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6293],{51042:function(ae,T,e){var P=e(1413),f=e(67294),p=e(42110),j=e(91146),B=function(A,S){return f.createElement(j.Z,(0,P.Z)((0,P.Z)({},A),{},{ref:S,icon:p.Z}))},D=f.forwardRef(B);T.Z=D},37476:function(ae,T,e){e.d(T,{Y:function(){return ie}});var P=e(74165),f=e(15861),p=e(1413),j=e(97685),B=e(91),D=e(73177),Z=e(28459),A=e(17788),S=e(55917),K=e(21770),m=e(80334),v=e(67294),se=e(73935),ne=e(89671),x=e(85893),oe=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function ie(E){var y,I,ue=E.children,L=E.trigger,F=E.onVisibleChange,W=E.onOpenChange,r=E.modalProps,U=E.onFinish,g=E.submitTimeout,de=E.title,re=E.width,$=E.visible,H=E.open,d=(0,B.Z)(E,oe);(0,m.ET)(!d.footer||!(r!=null&&r.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var b=(0,v.useContext)(Z.ZP.ConfigContext),Y=(0,v.useState)([]),Q=(0,j.Z)(Y,2),ce=Q[1],ve=(0,v.useState)(!1),te=(0,j.Z)(ve,2),X=te[0],J=te[1],n=(0,K.Z)(!!$,{value:H||$,onChange:W||F}),le=(0,j.Z)(n,2),z=le[0],R=le[1],N=(0,v.useRef)(null),w=(0,v.useCallback)(function(s){N.current===null&&s&&ce([]),N.current=s},[]),C=(0,v.useRef)(),M=(0,v.useCallback)(function(){var s,t,l,o=(s=(t=d.form)!==null&&t!==void 0?t:(l=d.formRef)===null||l===void 0?void 0:l.current)!==null&&s!==void 0?s:C.current;o&&r!==null&&r!==void 0&&r.destroyOnClose&&o.resetFields()},[r==null?void 0:r.destroyOnClose,d.form,d.formRef]);(0,v.useImperativeHandle)(d.formRef,function(){return C.current},[C.current]),(0,v.useEffect)(function(){(H||$)&&(W==null||W(!0),F==null||F(!0))},[$,H]);var k=(0,v.useMemo)(function(){return L?v.cloneElement(L,(0,p.Z)((0,p.Z)({key:"trigger"},L.props),{},{onClick:function(){var s=(0,f.Z)((0,P.Z)().mark(function l(o){var u,a;return(0,P.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:R(!z),(u=L.props)===null||u===void 0||(a=u.onClick)===null||a===void 0||a.call(u,o);case 2:case"end":return c.stop()}},l)}));function t(l){return s.apply(this,arguments)}return t}()})):null},[R,L,z]),V=(0,v.useMemo)(function(){var s,t,l,o,u,a;return d.submitter===!1?!1:(0,S.Z)({searchConfig:{submitText:(s=(t=r==null?void 0:r.okText)!==null&&t!==void 0?t:(l=b.locale)===null||l===void 0||(l=l.Modal)===null||l===void 0?void 0:l.okText)!==null&&s!==void 0?s:"\u786E\u8BA4",resetText:(o=(u=r==null?void 0:r.cancelText)!==null&&u!==void 0?u:(a=b.locale)===null||a===void 0||(a=a.Modal)===null||a===void 0?void 0:a.cancelText)!==null&&o!==void 0?o:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:g?X:void 0,onClick:function(c){var h;R(!1),r==null||(h=r.onCancel)===null||h===void 0||h.call(r,c)}}},d.submitter)},[(y=b.locale)===null||y===void 0||(y=y.Modal)===null||y===void 0?void 0:y.cancelText,(I=b.locale)===null||I===void 0||(I=I.Modal)===null||I===void 0?void 0:I.okText,r,d.submitter,R,X,g]),i=(0,v.useCallback)(function(s,t){return(0,x.jsxs)(x.Fragment,{children:[s,N.current&&t?(0,x.jsx)(v.Fragment,{children:(0,se.createPortal)(t,N.current)},"submitter"):t]})},[]),q=(0,v.useCallback)(function(){var s=(0,f.Z)((0,P.Z)().mark(function t(l){var o,u,a;return(0,P.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=U==null?void 0:U(l),g&&o instanceof Promise&&(J(!0),u=setTimeout(function(){return J(!1)},g),o.finally(function(){clearTimeout(u),J(!1)})),c.next=4,o;case 4:return a=c.sent,a&&R(!1),c.abrupt("return",a);case 7:case"end":return c.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),[U,R,g]),ee=(0,D.X)(z);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(A.Z,(0,p.Z)((0,p.Z)((0,p.Z)({title:de,width:re||800},r),ee),{},{onCancel:function(t){var l;g&&X||(R(!1),r==null||(l=r.onCancel)===null||l===void 0||l.call(r,t))},afterClose:function(){var t;M(),z&&R(!1),r==null||(t=r.afterClose)===null||t===void 0||t.call(r)},footer:d.submitter!==!1?(0,x.jsx)("div",{ref:w,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,x.jsx)(ne.I,(0,p.Z)((0,p.Z)({formComponentType:"ModalForm",layout:"vertical"},d),{},{onInit:function(t,l){var o;d.formRef&&(d.formRef.current=l),d==null||(o=d.onInit)===null||o===void 0||o.call(d,t,l),C.current=l},formRef:C,submitter:V,onFinish:function(){var s=(0,f.Z)((0,P.Z)().mark(function t(l){var o;return(0,P.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q(l);case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},t)}));return function(t){return s.apply(this,arguments)}}(),contentRender:i,children:ue}))})),k]})}},30361:function(ae,T,e){e.r(T),e.d(T,{default:function(){return N}});var P=e(15009),f=e.n(P),p=e(99289),j=e.n(p),B=e(5574),D=e.n(B),Z=e(6742),A=e(47389),S=e(64082),K=e(1413),m=e(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},se=v,ne=e(91146),x=function(C,M){return m.createElement(ne.Z,(0,K.Z)((0,K.Z)({},C),{},{ref:M,icon:se}))},oe=m.forwardRef(x),ie=oe,E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},y=E,I=function(C,M){return m.createElement(ne.Z,(0,K.Z)((0,K.Z)({},C),{},{ref:M,icon:y}))},ue=m.forwardRef(I),L=ue,F=e(63386),W=e(93410),r=e(35312),U=e(68872),g=e(14726),de=e(71230),re=e(15746),$=e(86738),H=e(55060),d=e(96746),b=e(96074),Y=e(26412),Q=e(32983),ce=e(67225),ve=e(51042),te=e(37476),X=e(64317),J=e(66309),n=e(85893),le=function(C){var M=(0,r.useModel)("@@initialState"),k=M.initialState,V=k||{},i=V.currentUser,q=C.roles,ee=(0,r.useParams)(),s=ee.id,t=(0,m.useState)(!1),l=D()(t,2),o=l[0],u=l[1],a=function(){var O=j()(f()().mark(function c(h){var G;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return h.id=s,_.next=3,(0,Z.qU)(h);case 3:G=_.sent,G.succeeded?(U.ZP.success("Added!"),u(!1)):U.ZP.error(G.errors[0].description);case 5:case"end":return _.stop()}},c)}));return function(h){return O.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z.Title,{level:5,children:"Roles"}),q.map(function(O){return(0,n.jsx)(J.Z,{color:"blue",children:O},O)}),(i==null?void 0:i.roles.includes("admin"))&&(0,n.jsx)(g.ZP,{type:"dashed",size:"small",icon:(0,n.jsx)(ve.Z,{}),onClick:function(){return u(!0)},children:"Add to role"}),(0,n.jsx)(te.Y,{title:"Add to role",open:o,onOpenChange:u,onFinish:a,children:(0,n.jsx)(X.Z,{name:"roleName",label:"Role",request:function(){var O=j()(f()().mark(function c(h){var G;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,ce.O)(h);case 2:return G=_.sent,_.abrupt("return",G.data.map(function(fe){return{value:fe.name,label:fe.name}}));case 4:case"end":return _.stop()}},c)}));return function(c){return O.apply(this,arguments)}}()})})]})},z=le,R=function(){var C=(0,r.useParams)(),M=C.id,k=(0,m.useState)(),V=D()(k,2),i=V[0],q=V[1],ee=(0,m.useState)("activity"),s=D()(ee,2),t=s[0],l=s[1];(0,m.useEffect)(function(){(0,Z.VQ)(M).then(function(u){q(u.data)})},[M]);var o=function(){var u=j()(f()().mark(function a(){var O;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Z.Ob)(M);case 2:O=h.sent,O.succeeded&&U.ZP.success("Saved!");case 4:case"end":return h.stop()}},a)}));return function(){return u.apply(this,arguments)}}();return(0,n.jsx)(F._z,{extra:(0,n.jsx)(r.Link,{to:"/users/center/".concat(M),children:(0,n.jsx)(g.ZP,{type:"primary",icon:(0,n.jsx)(A.Z,{}),children:"Ch\u1EC9nh s\u1EEDa"})}),children:(0,n.jsxs)(de.Z,{gutter:16,children:[(0,n.jsx)(re.Z,{span:6,children:(0,n.jsxs)(W.Z,{title:"Profile",headerBordered:!0,actions:[(0,n.jsx)($.Z,{title:"Confirm email?",onConfirm:o,children:(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(S.Z,{}),type:"link"})})],children:[(0,n.jsxs)("div",{className:"flex items-center justify-center flex-col",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(H.Z,{src:i==null?void 0:i.avatar,width:200,height:200,alt:"Avatar",className:"rounded-full"})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(d.Z.Title,{level:4,children:i==null?void 0:i.userName})}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(g.ZP,{type:"primary",icon:(0,n.jsx)(ie,{}),children:"Follow"}),(0,n.jsx)(g.ZP,{icon:(0,n.jsx)(L,{}),children:"Message"})]})]}),(0,n.jsx)(b.Z,{}),(0,n.jsxs)(Y.Z,{title:"Info",column:1,children:[(0,n.jsx)(Y.Z.Item,{label:"Email",children:i==null?void 0:i.email}),(0,n.jsx)(Y.Z.Item,{label:"Phone",children:i==null?void 0:i.phoneNumber})]}),(0,n.jsx)(b.Z,{}),i&&(0,n.jsx)(z,{roles:i==null?void 0:i.roles})]})}),(0,n.jsx)(re.Z,{span:18,children:(0,n.jsx)(W.Z,{tabs:{tabPosition:"top",activeKey:t,items:[{label:"Activity",key:"activity",children:(0,n.jsx)(Q.Z,{})},{label:"Follower",key:"follower",children:(0,n.jsx)(Q.Z,{})}],onChange:function(a){l(a)}},children:(0,n.jsx)(Q.Z,{})})})]})})},N=R},67225:function(ae,T,e){e.d(T,{O:function(){return D}});var P=e(15009),f=e.n(P),p=e(99289),j=e.n(p),B=e(35312);function D(A){return Z.apply(this,arguments)}function Z(){return Z=j()(f()().mark(function A(S){return f()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,B.request)("/role/list",{params:S}));case 1:case"end":return m.stop()}},A)})),Z.apply(this,arguments)}}}]);
