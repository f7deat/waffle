"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6293],{51042:function(re,A,e){var P=e(1413),f=e(67294),p=e(42110),C=e(91146),L=function(y,g){return f.createElement(C.Z,(0,P.Z)((0,P.Z)({},y),{},{ref:g,icon:p.Z}))},j=f.forwardRef(L);A.Z=j},37476:function(re,A,e){e.d(A,{Y:function(){return ae}});var P=e(74165),f=e(15861),p=e(1413),C=e(97685),L=e(91),j=e(73177),O=e(28459),y=e(17788),g=e(55917),E=e(21770),I=e(80334),v=e(67294),q=e(73935),te=e(89671),M=e(85893),le=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function ae(h){var U,B,se=h.children,W=h.trigger,F=h.onVisibleChange,S=h.onOpenChange,r=h.modalProps,$=h.onFinish,R=h.submitTimeout,oe=h.title,z=h.width,N=h.visible,G=h.open,d=(0,L.Z)(h,le);(0,I.ET)(!d.footer||!(r!=null&&r.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var K=(0,v.useContext)(O.ZP.ConfigContext),X=(0,v.useState)([]),ie=(0,C.Z)(X,2),ue=ie[1],de=(0,v.useState)(!1),ee=(0,C.Z)(de,2),J=ee[0],n=ee[1],ce=(0,E.Z)(!!N,{value:G||N,onChange:S||F}),ne=(0,C.Z)(ce,2),V=ne[0],Z=ne[1],b=(0,v.useRef)(null),D=(0,v.useCallback)(function(o){b.current===null&&o&&ue([]),b.current=o},[]),m=(0,v.useRef)(),Q=(0,v.useCallback)(function(){var o,t,a,s=(o=(t=d.form)!==null&&t!==void 0?t:(a=d.formRef)===null||a===void 0?void 0:a.current)!==null&&o!==void 0?o:m.current;s&&r!==null&&r!==void 0&&r.destroyOnClose&&s.resetFields()},[r==null?void 0:r.destroyOnClose,d.form,d.formRef]);(0,v.useImperativeHandle)(d.formRef,function(){return m.current},[m.current]),(0,v.useEffect)(function(){(G||N)&&(S==null||S(!0),F==null||F(!0))},[N,G]);var H=(0,v.useMemo)(function(){return W?v.cloneElement(W,(0,p.Z)((0,p.Z)({key:"trigger"},W.props),{},{onClick:function(){var o=(0,f.Z)((0,P.Z)().mark(function a(s){var c,l;return(0,P.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Z(!V),(c=W.props)===null||c===void 0||(l=c.onClick)===null||l===void 0||l.call(c,s);case 2:case"end":return i.stop()}},a)}));function t(a){return o.apply(this,arguments)}return t}()})):null},[Z,W,V]),u=(0,v.useMemo)(function(){var o,t,a,s,c,l;return d.submitter===!1?!1:(0,g.Z)({searchConfig:{submitText:(o=(t=r==null?void 0:r.okText)!==null&&t!==void 0?t:(a=K.locale)===null||a===void 0||(a=a.Modal)===null||a===void 0?void 0:a.okText)!==null&&o!==void 0?o:"\u786E\u8BA4",resetText:(s=(c=r==null?void 0:r.cancelText)!==null&&c!==void 0?c:(l=K.locale)===null||l===void 0||(l=l.Modal)===null||l===void 0?void 0:l.cancelText)!==null&&s!==void 0?s:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:R?J:void 0,onClick:function(i){var x;Z(!1),r==null||(x=r.onCancel)===null||x===void 0||x.call(r,i)}}},d.submitter)},[(U=K.locale)===null||U===void 0||(U=U.Modal)===null||U===void 0?void 0:U.cancelText,(B=K.locale)===null||B===void 0||(B=B.Modal)===null||B===void 0?void 0:B.okText,r,d.submitter,Z,J,R]),w=(0,v.useCallback)(function(o,t){return(0,M.jsxs)(M.Fragment,{children:[o,b.current&&t?(0,M.jsx)(v.Fragment,{children:(0,q.createPortal)(t,b.current)},"submitter"):t]})},[]),k=(0,v.useCallback)(function(){var o=(0,f.Z)((0,P.Z)().mark(function t(a){var s,c,l;return(0,P.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=$==null?void 0:$(a),R&&s instanceof Promise&&(n(!0),c=setTimeout(function(){return n(!1)},R),s.finally(function(){clearTimeout(c),n(!1)})),i.next=4,s;case 4:return l=i.sent,l&&Z(!1),i.abrupt("return",l);case 7:case"end":return i.stop()}},t)}));return function(t){return o.apply(this,arguments)}}(),[$,Z,R]),Y=(0,j.X)(V);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(y.Z,(0,p.Z)((0,p.Z)((0,p.Z)({title:oe,width:z||800},r),Y),{},{onCancel:function(t){var a;R&&J||(Z(!1),r==null||(a=r.onCancel)===null||a===void 0||a.call(r,t))},afterClose:function(){var t;Q(),V&&Z(!1),r==null||(t=r.afterClose)===null||t===void 0||t.call(r)},footer:d.submitter!==!1?(0,M.jsx)("div",{ref:D,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,M.jsx)(te.I,(0,p.Z)((0,p.Z)({formComponentType:"ModalForm",layout:"vertical"},d),{},{onInit:function(t,a){var s;d.formRef&&(d.formRef.current=a),d==null||(s=d.onInit)===null||s===void 0||s.call(d,t,a),m.current=a},formRef:m,submitter:u,onFinish:function(){var o=(0,f.Z)((0,P.Z)().mark(function t(a){var s;return(0,P.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,k(a);case 2:return s=l.sent,l.abrupt("return",s);case 4:case"end":return l.stop()}},t)}));return function(t){return o.apply(this,arguments)}}(),contentRender:w,children:se}))})),H]})}},30361:function(re,A,e){e.r(A),e.d(A,{default:function(){return Z}});var P=e(15009),f=e.n(P),p=e(99289),C=e.n(p),L=e(5574),j=e.n(L),O=e(6742),y=e(64082),g=e(1413),E=e(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},v=I,q=e(91146),te=function(D,m){return E.createElement(q.Z,(0,g.Z)((0,g.Z)({},D),{},{ref:m,icon:v}))},M=E.forwardRef(te),le=M,ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},h=ae,U=function(D,m){return E.createElement(q.Z,(0,g.Z)((0,g.Z)({},D),{},{ref:m,icon:h}))},B=E.forwardRef(U),se=B,W=e(63386),F=e(93410),S=e(35312),r=e(68872),$=e(71230),R=e(15746),oe=e(86738),z=e(14726),N=e(55060),G=e(96746),d=e(96074),K=e(26412),X=e(32983),ie=e(67225),ue=e(51042),de=e(37476),ee=e(64317),J=e(66309),n=e(85893),ce=function(D){var m=(0,S.useModel)("@@initialState"),Q=m.initialState,H=Q||{},u=H.currentUser,w=D.roles,k=(0,S.useParams)(),Y=k.id,o=(0,E.useState)(!1),t=j()(o,2),a=t[0],s=t[1],c=function(){var l=C()(f()().mark(function T(i){var x;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return i.id=Y,_.next=3,(0,O.qU)(i);case 3:x=_.sent,x.succeeded?(r.ZP.success("Added!"),s(!1)):r.ZP.error(x.errors[0].description);case 5:case"end":return _.stop()}},T)}));return function(i){return l.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.Z.Title,{level:5,children:"Roles"}),w.map(function(l){return(0,n.jsx)(J.Z,{color:"blue",children:l},l)}),(u==null?void 0:u.roles.includes("admin"))&&(0,n.jsx)(z.ZP,{type:"dashed",size:"small",icon:(0,n.jsx)(ue.Z,{}),onClick:function(){return s(!0)},children:"Add to role"}),(0,n.jsx)(de.Y,{title:"Add to role",open:a,onOpenChange:s,onFinish:c,children:(0,n.jsx)(ee.Z,{name:"roleName",label:"Role",request:function(){var l=C()(f()().mark(function T(i){var x;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,ie.O)(i);case 2:return x=_.sent,_.abrupt("return",x.data.map(function(ve){return{value:ve.name,label:ve.name}}));case 4:case"end":return _.stop()}},T)}));return function(T){return l.apply(this,arguments)}}()})})]})},ne=ce,V=function(){var D=(0,S.useParams)(),m=D.id,Q=(0,E.useState)(),H=j()(Q,2),u=H[0],w=H[1],k=(0,E.useState)("activity"),Y=j()(k,2),o=Y[0],t=Y[1];(0,E.useEffect)(function(){(0,O.PR)(m).then(function(s){w(s)})},[m]);var a=function(){var s=C()(f()().mark(function c(){var l;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,O.Ob)(m);case 2:l=i.sent,l.succeeded&&r.ZP.success("Saved!");case 4:case"end":return i.stop()}},c)}));return function(){return s.apply(this,arguments)}}();return(0,n.jsx)(W._z,{children:(0,n.jsxs)($.Z,{gutter:16,children:[(0,n.jsx)(R.Z,{span:6,children:(0,n.jsxs)(F.Z,{title:"Profile",headerBordered:!0,actions:[(0,n.jsx)(oe.Z,{title:"Confirm email?",onConfirm:a,children:(0,n.jsx)(z.ZP,{icon:(0,n.jsx)(y.Z,{}),type:"link"})})],children:[(0,n.jsxs)("div",{className:"flex items-center justify-center flex-col",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(N.Z,{src:u==null?void 0:u.avatar,width:200,height:200,alt:"Avatar",className:"rounded-full"})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(G.Z.Title,{level:4,children:u==null?void 0:u.userName})}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(z.ZP,{type:"primary",icon:(0,n.jsx)(le,{}),children:"Follow"}),(0,n.jsx)(z.ZP,{icon:(0,n.jsx)(se,{}),children:"Message"})]})]}),(0,n.jsx)(d.Z,{}),(0,n.jsxs)(K.Z,{title:"Info",column:1,children:[(0,n.jsx)(K.Z.Item,{label:"Email",children:u==null?void 0:u.email}),(0,n.jsx)(K.Z.Item,{label:"Phone",children:u==null?void 0:u.phoneNumber})]}),(0,n.jsx)(d.Z,{}),u&&(0,n.jsx)(ne,{roles:u==null?void 0:u.roles})]})}),(0,n.jsx)(R.Z,{span:18,children:(0,n.jsx)(F.Z,{tabs:{tabPosition:"top",activeKey:o,items:[{label:"Activity",key:"activity",children:(0,n.jsx)(X.Z,{})},{label:"Follower",key:"follower",children:(0,n.jsx)(X.Z,{})}],onChange:function(c){t(c)}},children:(0,n.jsx)(X.Z,{})})})]})})},Z=V},67225:function(re,A,e){e.d(A,{O:function(){return j}});var P=e(15009),f=e.n(P),p=e(99289),C=e.n(p),L=e(35312);function j(y){return O.apply(this,arguments)}function O(){return O=C()(f()().mark(function y(g){return f()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,L.request)("/role/list",{params:g}));case 1:case"end":return I.stop()}},y)})),O.apply(this,arguments)}}}]);
